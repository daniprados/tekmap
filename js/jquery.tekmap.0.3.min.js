// TekMap by comunicatek.com  under the mit license.
// Author:  Dani Prados
(function(b){function g(){var a=b.fn.TekMap.opts,c=a.mapoptions,d=new google.maps.LatLng(a.lat,a.lng);c.center=d;c=new google.maps.Map(this,c);a.click&&google.maps.event.addListener(c,"click",a.click);$maps=b(this);for(d=0;d<a.markers.length;d++)f(a.markers[d],c);$maps.data("tekmap",c)}function f(a,c){var d={position:new google.maps.LatLng(a.lat,a.lng),map:c,draggable:a.draggable};a.icon&&b.extend(d,d,{icon:a.icon});var e=new google.maps.Marker(d);b.fn.TekMap.markers.push(e);if(a.infowindow){var h= new google.maps.InfoWindow({content:a.infowindow});google.maps.event.addListener(e,"click",function(){h.open(c,e)})}var i=a.drag||b.noop;a.draggable&&google.maps.event.addListener(e,"dragend",function(){i(e)})}b.fn.TekMap=function(a){window.console&&window.console.log&&window.console.log("tekmap initialized");b.fn.TekMap.opts=b.extend({},b.fn.TekMap.defaults,a);b.fn.TekMap.markers=[];return this.each(g)};b.fn.TekMarker=function(a,c){b.fn.TekMap.p=a;b.fn.TekMap.map=c;return this.each(b.fn.TekMarker.marker)}; b.fn.TekMarker.marker=function(){var a=b.fn.TekMap.p,c=b.fn.TekMap.map;c||(c=b(this).data("tekmap"));f(a,c)};b.fn.TekMap.defaults={lat:42,lng:3,click:jQuery.noop,mapoptions:{zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:false},markers:[],background:"yellow"}})(jQuery);